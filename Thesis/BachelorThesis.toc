\contentsline {section}{\numberline {0.1}Abstract}{1}{}%
\contentsline {paragraph}{The developer describes the steps in researching and developing a Thunderbird Add-on that offers E2EE, without the need for key changes, i.e. without PGP. The developed software will allow one user to exchange a keyword/password with another user, encipher a message with that keyword/password, and the other user will be able to decipher to message with that password.}{1}{}%
\contentsline {chapter}{\numberline {1}Introduction}{4}{}%
\contentsline {paragraph}{The digital age has fully absorbed our societies. We do everything in some form or another on digital media: create art, science, communicate, create and share memories, play games, and write thesis reports with our computers. There is basically no limit to what people do with their computers.}{4}{}%
\contentsline {paragraph}{Proportional to this growth, the internet's influence on our lives has also ballooned. Our activities have been pushed more and more online, and onto "the cloud." Originally, few bothered to think about privacy. Most damaging, perhaps, was the erroneous expectation of private communication. Edward Snowden's revelations about the "Five Eyes" intelligence alliance, between the United States, the United Kingdom, Canada, Australia, and New Zealand and their the collection of all online communication, social media, and phone data removed any doubt about expectations to individual privacy. No online communication, or online activities in general, has been considered safe ever since.}{4}{}%
\contentsline {section}{\numberline {1.1}Background}{4}{}%
\contentsline {paragraph}{The the sphere of email communication, PGP has existed for decades. It is predicated on the exchange of user created public (and private) keys. However, it has a few inherent problems. First, there is a technical requirement to create and exchange keys. In order to facilitate this, additional client software must be installed. Additionally, several challenging steps beyond the scope of the average end user will need to be completed, like selecting encryption algorithm, size of key, etcetra. Originally, Thunderbird relied on an add-on, Enigmail, to create, manage, and exchange keys. The author used this add-on for many years. And, while it was satisfactory, it was plain to see that it was not without it's technical requirements.}{4}{}%
\contentsline {paragraph}{Starting with Thunderbird 78, Mozilla implemented OpenPGP as part of it's core client software, and dropped support for all add-ons not using MailExtensions (which includes Enigmail). However, the feature is disabled by default, and is still considered a work in progress. All other add-ons found on Thunderbird's extensions page or searching through Github were considered to be in a testing or experimental phase.}{4}{}%
\contentsline {section}{\numberline {1.2}Problem}{5}{}%
\contentsline {paragraph}{Mozilla has tried to support end-to-end encryption (E2EE) for a long time, it has been faced with a major obstacles, mostly mentioned above, including:}{5}{}%
\contentsline {paragraph}{Thus, the problem: How can Alice send an encrypted email to someone that does not have any type of public key available?}{5}{}%
\contentsline {section}{\numberline {1.3}Solution}{5}{}%
\contentsline {paragraph}{The bachelor thesis candidate intends to research and develop a Thunderbird Add-on, that will allow Alice to send an encrypted message to Bob. Bob is not a tech savvy person, and is clueless about encryption technology. So, the idea of learning, installing, and setting up any types of keys, for him, is overwhelming. However, they do communicate regularly, so Alice can just whisper a one time password to him. Subsequently, Alice could then use developed add-on to encipher an email message for Bob. Which, he then could decipher using the same add-on, and the analog agreed upon passphrase.}{5}{}%
\contentsline {paragraph}{More specifically, it will focus on the Mozilla Thunderbird client, for the simple fact that I have personally used it for over ten years, it's free, open-source, and cross platform. While I grant that not everyone uses Thunderbird, at least there should be no shortage of users, and theoretically anyone can get it easily, for free.}{5}{}%
\contentsline {paragraph}{Ultimately, this project aims to offer a simple, albeit \emph {not} perfect solution for those interested in privacy, that don't have the technical expertise to engage in key creation, exchanges or have zero knowledge about encryption. The author will demonstrate the advantages and disadvantages of various implementations strategies, and implement a solution that offers, hopefully, a viable encryption option that will fulfill some use cases.}{5}{}%
\contentsline {paragraph}{Research will dictate the best implementation strategy.}{6}{}%
\contentsline {section}{\numberline {1.4}Methods applied}{6}{}%
\contentsline {paragraph}{The methods and tools used to solve this research inquiry will include:}{6}{}%
\contentsline {paragraph}{After the research has been completed, all coding will proceed using a test driven development approach. Thunderbird add-ons are based on MailExtension technology, which are created using the follow standard languages:}{6}{}%
\contentsline {chapter}{\numberline {2}Cryptography}{7}{}%
\contentsline {section}{\numberline {2.1}Algorithm selection overview}{7}{}%
\contentsline {subsection}{\numberline {2.1.1}Symmetric key encryption}{7}{}%
\contentsline {paragraph}{Selecting an algorithm, among so many, was pretty straightforward given my use case, but I wanted to show my thought processes. Firstly, there are two fundamental paths for selecting an encryption algorithm. The selection between \emph {asymmetric} and \emph {symmetric} key encryption is the initial decision.}{7}{}%
\contentsline {paragraph}{The goal of this project is \emph {ease of use} (at the cost of security), so our choice is clear: symmetric-key encryption.}{7}{}%
\contentsline {subsection}{\numberline {2.1.2}Block vs. Stream cipher encryption}{7}{}%
\contentsline {paragraph}{Next, we need to decide between a block cipher or a stream cipher. As Bruce Schneier defines the two in his book "Applied Cryptography: Protocols, Algorithms in C" as:}{7}{}%
\contentsline {paragraph}{The advantages of a stream ciphers:}{8}{}%
\contentsline {paragraph}{are more appropriate for hardware implementations.}{8}{}%
\contentsline {paragraph}{According to Bruce Schneier, block ciphers are more suitable for software implementation as they are easier to implement, avoid time-consuming bit manipulations, and operate on computer sized blocks.}{8}{}%
\contentsline {paragraph}{A bit of a spoiler, there is no longer strict "block vs. stream" cipher schemas. We'll explain shortly, but for now, we'll accept that we'll be implementing a block cipher.}{8}{}%
\contentsline {subsection}{\numberline {2.1.3}Block cipher selection}{8}{}%
\contentsline {paragraph}{There are many block ciphers to choose from, these are just some of the most popular:}{8}{}%
\contentsline {paragraph}{But, after an overall account of the block enciphers available, the author decided there is really only one choice: the Advanced Encryption Standard (AES) as it's the industry standard.}{9}{}%
\contentsline {section}{\numberline {2.2}Advanced Encryption Standard (AES)}{9}{}%
\contentsline {paragraph}{For reasons that will soon become apparent, AES has been the industry standard for the past 20 years, even used as a secure standard by the U.S. government.}{9}{}%
\contentsline {subsection}{\numberline {2.2.1}Mathematics: Overview}{9}{}%
\contentsline {paragraph}{Since a full background is beyond the scope of this project (it could entail it's own thesis), the author will gloss over it quickly.}{9}{}%
\contentsline {paragraph}{The foundation of AES is grounded in Abstract mathematics, more specifically, \emph {set theory}. Within set theory exists the study of groups. A group is a set of elements upon which an operation (and its inverse) can be executed.}{9}{}%
\contentsline {paragraph}{In short,}{9}{}%
\contentsline {paragraph}{are operations that can be applied to a group of elements.}{9}{}%
\contentsline {paragraph}{A field is an extension of a group, in that all four basic arithmetic operations are included in a single structure.}{9}{}%
\contentsline {paragraph}{However, as cryptographers, we are not yet satisfied. We need a working set that is finite, or as they are commonly known \emph {Galois fields}, or \emph {unendliche KÃ¶rpe}. In short, the beauty of the Galois fields is that regardless of the four principle operations performed on them, the result will remain \emph {within} the set of elements. This is profound, necessary and brilliant for cryptographic usage. But, how does this work?}{9}{}%
\contentsline {paragraph}{Essentially, the above operations are carried out with the aid of the \emph {modulo operator}, and it ensures our result remains in the set. But, what set?}{9}{}%
\contentsline {paragraph}{We extend beyond a finite field, to focus on a extension field, in particular:}{10}{}%
\contentsline {paragraph}{This conveniently translates to 256 elements, which fits perfectly within a computer byte.}{10}{}%
\contentsline {paragraph}{The last thing we will want to have in mind as we proceed is polynomial division. It's not any different than grammar school algebra, but is carried out with one of a very special type of polynomial, known as a \emph {irreducible polynomial}. An irreducible polynomial is similar to a prime number, only it is a polynomial. In other words, it cannot be broken down, divided down, into smaller components. For our cryptographic purposes, the polynomial we'll use is the following: $x^8 + x^4 + x^3 + x + 1$}{10}{}%
\contentsline {subsection}{\numberline {2.2.2}The AES algorithm}{10}{}%
\contentsline {paragraph}{With the mathemathical theories out of the way, we can look at how all the theory get implemented into our computer. Here is a simplifed overview: (See reference image: 2.1\hbox {}).}{10}{}%
\contentsline {paragraph}{The first step in the AES algorithm is the creation of a 4-by-4 array of bytes called the state, that is modified in a series of rounds. The state is initially set equal to the input of the cipher (notice: a 128 bit--minimum--is exactly 16 bytes, perfect for execution on a computer). Then, the following for operations are applies.}{10}{}%
\contentsline {subsection}{\numberline {2.2.3}Step One: Adding the key.}{11}{}%
\contentsline {paragraph}{In every round of the AES, a 128-bit sub-key is derived from the master key, and it is interpreted as a 4-by-4 array of bytes. The state array is updated by XORing it with the sub-key (See reference image: 2.2\hbox {}).}{11}{}%
\contentsline {subsection}{\numberline {2.2.4}"SubBytes" or byte substitution}{11}{}%
\contentsline {paragraph}{In this step, each byte of the state array is replaced by another byte according to a single fixed table S. This substitution table (or S-box) is a bijection over $\{0,1\}^8$. There is only one S-box that is substituting all the bytes in the state array, every round (See image: 2.3\hbox {}).}{11}{}%
\contentsline {subsection}{\numberline {2.2.5}ShiftRows or the rows are shifted}{12}{}%
\contentsline {paragraph}{In this step, the bytes in each row of the state array are cyclically shifted to the left as follows: the first row of the array is untouched, and the second row is shifte one place to the left, the third row is shifted two places to the left, and the fourth row is shifted three places to the left (See reference image: 2.4\hbox {}).}{12}{}%
\contentsline {subsection}{\numberline {2.2.6}MixColums or the columns are mixed}{12}{}%
\contentsline {paragraph}{In this step, an invertible linear transformation is applied to each column. One can think of this as a matrix multiplication (See reference image: 2.5\hbox {}).}{12}{}%
\contentsline {subsection}{\numberline {2.2.7}The process is repeated x number of times.}{13}{}%
\contentsline {paragraph}{The AES algorithm supports bit sizes of 128 (minimum requirement), 192, and 256. Depending on the bit size specified, the algorithm will be repeated either 10, 12, or 14 times.}{13}{}%
\contentsline {subsection}{\numberline {2.2.8}AES algorithm summary}{13}{}%
\contentsline {paragraph}{The goal of the algorithm is to insert confusion and diffusion into the field, over and over. And, the algorithm is just reversed to retrieve the plain text. The algorithm was fast in 2001, when it was introduced, but now, 20 years later, it is built into all modern desktop CPUs (at least Intel and AMD), so it's blazingly fast.}{13}{}%
\contentsline {paragraph}{Although the algorithm is derived from a combination of complex mathematical theories, it's algorithmic implementation into hardware is the perfect intersection between mathematics and computer science. Any computer scientist can quickly assess from the images above, that the XORing, bit shifting, table lookups, and bit permutations are exactly the kind of operations that are executed super fast on computers.}{13}{}%
\contentsline {chapter}{\numberline {3}Implementation}{14}{}%
\contentsline {section}{\numberline {3.1}Javascript Cryptography}{14}{}%
\contentsline {paragraph}{Originally, the researcher was not sure how best to implement cryptography within a Thunderbird add-on. Implementing my own javascript AES algorithm, while ideal, was not realistic--or adviceable--with the time constraints of this thesis. Thus, the issue would be finding an existing library or API that had done the javascript cryptographic implementations.}{14}{}%
\contentsline {paragraph}{For this task, there were three necessary conditions:}{14}{}%
\contentsline {paragraph}{and, slightly less important, actively maintained.}{14}{}%
\contentsline {paragraph}{Meeting the above criteria was not as simple as it would seem. There were many options that met some of the conditions, but meeting them all was more challenging. Ultimately, however, the researcher was satisfied with the Stanford Javascript Crypto Library (SJCL) meeting the above full criteria.}{14}{}%
\contentsline {paragraph}{The usage is pretty straight forward, and will work for this implementation. Simply linking the javascript source in the html file (See reference figure: 3.1\hbox {}).:}{15}{}%
\contentsline {paragraph}{and, the javascript can simply be used as follows (See reference figure: 3.2\hbox {}):}{15}{}%
\contentsline {paragraph}{giving the following result (See reference figure: 3.3\hbox {}):}{15}{}%
\contentsline {paragraph}{The usage is pretty straight forward, and will meet our needs.}{15}{}%
\contentsline {section}{\numberline {3.2}WebExtensions}{16}{}%
\contentsline {paragraph}{WebExtensions are web technology built with typical Web elements such as HTML, CSS, and javascript. Each extension must also have a \emph {manifest.json} file which carries vital information about the extension. This may include properties--known as manifest keys--like the author of the software extension, software version, permissions, and/or minimum requirement of Thunderbird to use the extension, just to name a few. As the author delves into the development section, it will be pretty clear how they work.}{16}{}%
\contentsline {paragraph}{Starting with the release of Thunderbird version 68 (August 2019), Thunderbird moved to only support WebExtensions for add-ons and themes development, with all previous versions no longer working.}{16}{}%
\contentsline {paragraph}{Here is an image from Mozilla's Thunderbird Add-on Webpage that gives a quick glance of how the extensions might look like.}{16}{}%
\contentsline {section}{\numberline {3.3}Implementation Details}{16}{}%
\contentsline {chapter}{\numberline {4}Challenges Encountered}{17}{}%
\contentsline {section}{\numberline {4.1}Open-source community}{17}{}%
\contentsline {section}{\numberline {4.2}Live development environment}{17}{}%
\contentsline {chapter}{\numberline {5}Summary}{18}{}%
\contentsline {section}{\numberline {5.1}Retrospective}{18}{}%
\contentsline {paragraph}{In an ideal situation, I would have liked to to implemented "an HTW AES javascript crypto suite." However, the author was lacking to conditions. One, a team of likely three students would have been required to carry out the project in the required timeframe. The documentation, development, and testing of such a system would have required a great deal of teamwork.}{18}{}%
\contentsline {paragraph}{Secondly, the students working as a team would have had to work together in the past, be known to each other, and have a nice blend of talents, motivations, and personalities for it to work efficiently.}{18}{}%
\contentsline {chapter}{\numberline {6}Software Requirments Specifications}{19}{}%
\contentsline {section}{\numberline {6.1}Introduction}{19}{}%
\contentsline {subsection}{\numberline {6.1.1}Purpose}{19}{}%
\contentsline {paragraph}{This document will describe the entire software development process, including use cases, personas, diagrams, and the end goals of the system. The audience for this document will be any persons interested in the software engineering process used for this project, but more specifically, those responsible for overseeing and rating this project.}{19}{}%
\contentsline {subsection}{\numberline {6.1.2}Scope}{19}{}%
\contentsline {paragraph}{The name for this product will be "Thunderbird: One Time Password." This product will be a Thunderbird add-on, that will encipher plain text into cipher text, which will be delivered by the Thunderbird client to another Thunderbird recipient, that also has the add-on installed. Finally, the second person will be able to decipher the cipher text back to plain text, and read the message.}{19}{}%
\contentsline {subsection}{\numberline {6.1.3}Definitions, acronyms, abbreviations}{19}{}%
\contentsline {paragraph}{The following definitions, acronyms, and abbreviations may be used with in the software development process:}{19}{}%
\contentsline {subsection}{\numberline {6.1.4}References}{20}{}%
\contentsline {paragraph}{Author used the IEEE document:}{20}{}%
\contentsline {paragraph}{the IEEE Recommended Practice for Software Requirements Specifications.}{20}{}%
\contentsline {subsection}{\numberline {6.1.5}Overview}{20}{}%
\contentsline {section}{\numberline {6.2}Overall Description}{20}{}%
\contentsline {paragraph}{The following subsections will describe the general factors that will influence the product requirements, including any background information.}{20}{}%
\contentsline {subsection}{\numberline {6.2.1}Product perspective}{20}{}%
\contentsline {paragraph}{The developed software product, \emph {Thunderbird: One Time Password}, has not current rival. It current alternatives would be Mozilla's own implementation of OpenPGP. The previous option was PgP through the add-on Enigmail. However, at the writing of this document, the add-on is no longer supported.}{20}{}%
\contentsline {paragraph}{The two alternatives do have the advantage that they used symmetric key exchange to encrypt emails, which is more secure, and recommended for encoded email exchange. The \emph {Thunderbird: One Time Password} add-on will have the feature that it is easy to use, at the expense of security.}{20}{}%
\contentsline {subsubsection}{System interfaces}{21}{}%
\contentsline {paragraph}{The required, and assumed interfaces required for the product include the following:}{21}{}%
\contentsline {subsubsection}{User interfaces}{21}{}%
\contentsline {paragraph}{There are no special user interface requirements.}{21}{}%
\contentsline {subsubsection}{Hardware interfaces}{21}{}%
\contentsline {paragraph}{There are no special hardware interfaces required for this product to function.}{21}{}%
\contentsline {subsubsection}{Software interfaces}{21}{}%
\contentsline {paragraph}{The required software interfaces are:}{21}{}%
\contentsline {subsubsection}{Communications interfaces}{21}{}%
\contentsline {paragraph}{No special communication interfaces will be required, than would already be prerequisites for Email communication, i.e. network capable computer.}{21}{}%
\contentsline {subsubsection}{Memory constraints}{21}{}%
\contentsline {paragraph}{Not applicable}{21}{}%
\contentsline {subsubsection}{Operations}{21}{}%
\contentsline {paragraph}{Not applicable}{21}{}%
\contentsline {subsubsection}{Site adaptation requirements}{21}{}%
\contentsline {paragraph}{Not applicable}{21}{}%
\contentsline {subsection}{\numberline {6.2.2}Product functions}{22}{}%
\contentsline {subsection}{\numberline {6.2.3}User characteristics}{22}{}%
\contentsline {subsection}{\numberline {6.2.4}Constraints}{22}{}%
\contentsline {paragraph}{There will be various constraints within this project listed below:}{22}{}%
\contentsline {subsection}{\numberline {6.2.5}Assumptions and dependencies}{22}{}%
\contentsline {section}{\numberline {6.3}Specific Requirements}{22}{}%
\contentsline {section}{\numberline {6.4}Appendix}{22}{}%
\contentsline {chapter}{References}{23}{}%
